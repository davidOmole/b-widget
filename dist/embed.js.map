{"version":3,"file":"embed.js","sources":["../src/embed.ts"],"sourcesContent":["interface BookingWidgetOptions {\n  type: 'inline' | 'popup' | 'popup_text';\n  targetId: string;\n  serviceId: string;\n  slug: string;\n  buttonText?: string;\n  onSuccess?: (data: any) => void;\n  onError?: (error: any) => void;\n}\n\ndeclare global {\n  interface Window {\n    initBookingWidget: (options: BookingWidgetOptions) => void;\n  }\n}\n\n(function () {\n  // Create a unique ID for the widget\n  const widgetId = 'booking-widget-' + Math.random().toString(36).substr(2, 9);\n\n  // Function to create the iframe\n  const createIframe = (serviceId: string, slug: string): HTMLIFrameElement => {\n    const iframe = document.createElement('iframe');\n    iframe.style.width = '100%';\n    iframe.style.height = '600px';\n    iframe.style.border = 'none';\n    iframe.src = `https://bookings-widgets.fly.dev/${slug}/${serviceId}`;\n    iframe.title = 'Booking Widget';\n    return iframe;\n  };\n\n  // Function to initialize the widget\n  window.initBookingWidget = function (options: BookingWidgetOptions): void {\n    const {\n      type = 'inline',\n      targetId,\n      serviceId = 'your-service-id',\n      slug = 'mikun',\n      buttonText = 'Schedule a Meeting',\n      onSuccess,\n      onError,\n    } = options;\n\n    const target : HTMLElement = document.getElementById(targetId) || document.body;\n    if (!target) {\n      console.error('Target element not found');\n      return;\n    }\n    if (type === 'inline') {\n      // For inline embed, create container and iframe\n      const container = document.createElement('div');\n      container.id = widgetId;\n      container.style.width = '100%';\n      container.style.minHeight = '600px';\n      container.appendChild(createIframe(serviceId, slug));\n      target.appendChild(container);\n    } else {\n      // For popup and popup_text, create a button or link\n      const button = document.createElement(type === 'popup' ? 'button' : 'a');\n      button.textContent = buttonText;\n\n      if (type === 'popup') {\n        // Style for popup button\n        button.style.padding = '12px 24px';\n        button.style.borderRadius = '8px';\n        button.style.border = 'none';\n        button.style.cursor = 'pointer';\n        button.style.backgroundColor = '#007AFF';\n        button.style.color = 'white';\n        button.style.fontWeight = '600';\n        button.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.15)';\n        button.style.transition = 'all 0.2s ease';\n        button.style.position = 'fixed';\n        button.style.bottom = '20px';\n        button.style.right = '20px';\n        button.style.zIndex = '999';\n\n        // Add hover effect\n        button.addEventListener('mouseover', () => {\n          button.style.backgroundColor = '#0056b3';\n          button.style.transform = 'translateY(-2px)';\n        });\n\n        button.addEventListener('mouseout', () => {\n          button.style.backgroundColor = '#007AFF';\n          button.style.transform = 'translateY(0)';\n        });\n      } else {\n        // Style for popup text link\n        button.style.color = '#007AFF';\n        button.style.textDecoration = 'none';\n        button.style.fontWeight = '500';\n        button.style.cursor = 'pointer';\n        button.style.display = 'inline-block';\n        button.style.margin = '10px 0';\n\n        // Add hover effect\n        button.addEventListener('mouseover', () => {\n          button.style.textDecoration = 'underline';\n        });\n\n        button.addEventListener('mouseout', () => {\n          button.style.textDecoration = 'none';\n        });\n      }\n\n      // Create modal container\n      const modal = document.createElement('div');\n      modal.style.display = 'none';\n      modal.style.position = 'fixed';\n      modal.style.top = '0';\n      modal.style.left = '0';\n      modal.style.width = '100%';\n      modal.style.height = '100%';\n      modal.style.backgroundColor = '#050505cc';\n      modal.style.zIndex = '1000';\n\n      // Create modal content\n      const modalContent = document.createElement('div');\n      modalContent.style.position = 'relative';\n      modalContent.style.width = '80%';\n      modalContent.style.maxWidth = '800px';\n      modalContent.style.margin = '50px auto';\n      modalContent.style.backgroundColor = 'white';\n      modalContent.style.padding = '20px';\n      modalContent.style.borderRadius = '8px';\n\n      // Add close button\n      const closeButton = document.createElement('button');\n      closeButton.textContent = 'Ã—';\n      closeButton.style.position = 'absolute';\n      closeButton.style.right = '10px';\n      closeButton.style.top = '10px';\n      closeButton.style.border = 'none';\n      closeButton.style.background = 'none';\n      closeButton.style.fontSize = '24px';\n      closeButton.style.cursor = 'pointer';\n\n      // Add event listeners\n      button.addEventListener('click', (e: Event) => {\n        e.preventDefault();\n        modal.style.display = 'block';\n      });\n\n      closeButton.addEventListener('click', () => {\n        modal.style.display = 'none';\n      });\n\n      modal.addEventListener('click', (e: MouseEvent) => {\n        if (e.target === modal) {\n          modal.style.display = 'none';\n        }\n      });\n\n      // Assemble the modal\n      modalContent.appendChild(closeButton);\n      modalContent.appendChild(createIframe(serviceId, slug));\n      modal.appendChild(modalContent);\n\n      // Add to the page\n      target.appendChild(button);\n      document.body.appendChild(modal);\n    }\n\n    // Add message listener for success/error events\n    window.addEventListener('message', (event: MessageEvent) => {\n      if (event.origin === `https://bookings-widgets.fly.dev/${slug}/${serviceId}`) {\n        if (event.data.type === 'booking-success' && onSuccess) {\n          onSuccess(event.data);\n        } else if (event.data.type === 'booking-error' && onError) {\n          onError(event.data.error);\n        }\n      }\n    });\n  };\n})();\n\nexport default window.initBookingWidget;\n"],"names":["widgetId","createIframe","serviceId","slug","iframe","options","type","targetId","buttonText","onSuccess","onError","target","container","button","modal","modalContent","closeButton","e","event"],"mappings":"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"}